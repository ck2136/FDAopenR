---
output: rmarkdown::github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->


```{r, echo=FALSE}
knitr::opts_chunk$set(collapse=TRUE, comment="##", fig.retina=2, fig.path = "README <- figs/README-")
```

`FDAopenR` : R package for accessing and manipulating openFDA API.

The following functions are implemented:

- ndcToString:  Converting numeric ndc values to appropriate ndc string values for open FDA API search
- listSF:       Listing Search Field Parameters
- extractFDA:   Extracts relevant information from the [open FDA API](https://open.fda.gov/apis/)


### Installation

```{r eval=FALSE}
# you'll want to see the vignettes, trust me
library("devtools")
devtools::install_github("ck2136/FDAopenR")
# for now not on CRAN :(
```

```{r echo=FALSE, message=FALSE, warning=FALSE, error=FALSE}
options(width=120)
```

### Usage

```{r}
library(FDAopenR)

# current verison
packageVersion("FDAopenR")

# - - - - - - - - - - - - - - - - - - - - - #
# Instantiate example classes
# - - - - - - - - - - - - - - - - - - - - - #
drug1 <- new(Class="Drug", 
          ndc = 687889736,
          apikey="Y3CgaZj67AotB7b4XLhzHJTY7oBWKUC3u1fYulw8"
)
device1 <- new(Class="Device",
               reg_num="878.4370",
               apikey="Y3CgaZj67AotB7b4XLhzHJTY7oBWKUC3u1fYulw8"
               )
food1 <- new(Class="Food",
               event_id="68589",
               apikey="Y3CgaZj67AotB7b4XLhzHJTY7oBWKUC3u1fYulw8"
               )
other1 <- new(Class="Other",
               ndc=6382447364,
               apikey="Y3CgaZj67AotB7b4XLhzHJTY7oBWKUC3u1fYulw8"
               )
```

#### Convert NDC numeric to NDC string

```{r ndcToString, message=FALSE, warning=FALSE, fig.height=9.5, fig.width=9.5}
drug1 %>% str
drug1 <- ndcToString(drug1)
drug1 %>% str
#ndcToString(device1) # this will be an error!
other1 <- ndcToString(other1)
other1 %>% str
```

#### Search Field 

```{r searchField, message=FALSE, warning=FALSE, fig.height=9.5, fig.width=9.5}
listSF(drug1,"event") 
listSF(drug1,"label") 
listSF(drug1,"ndc") 

listSF(device1,"510k") 
listSF(device1,"classification") 
listSF(device1,"enforcement") 
listSF(device1,"event") 
listSF(device1,"pma") 
listSF(device1,"recall") 
listSF(device1,"registrationlisting") 
listSF(device1,"udi") 

listSF(food1,"enforcement") 
listSF(food1,"event") 

listSF(other1) 
```

#### Extract FDA information

```{r FDAinfo, message=FALSE, warning=FALSE, fig.height=9.5, fig.width=9.5}
extractFDA(drug1,"event","receivedate:[20040101+TO+20081231]&limit=15") %>% str
extractFDA(drug1,"ndc", "finished:true&limit=3") %>% str

extractFDA(device1,"registrationlisting",'')
extractFDA(device1,"udi",'public_version_status:Update')
extractFDA(device1,"udi",'has_serial_number:truelimit=10')
extractFDA(device1,"pma",'decision_code:APPR&limit=3')

extractFDA(food1, "enforcement", 'report_date:[20040101+TO+20131231]&limit=3')
extractFDA(food1, "event", 'date_created:[20040101+TO+20131231]&limit=5')

extractFDA(other1, query='marketing_start_date:[20040101+TO+20131231]&limit=5')
```

## Authors

* [Chong Hoon Kim](mailto:chong.kim@ucdenver.edu)
